<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>بورتفوليو مصور فيديوغرافي</title>
  <style>
    :root { --bg:#0b0b0b; --card:#111; --text:#f2f2f2; --muted:#b7b7b7; --primary:#e63946; --shadow:0 10px 30px rgba(0,0,0,.35); }
    [data-theme="light"] { --bg:#f7f7f7; --card:#fff; --text:#0b0b0b; --muted:#444; --primary:#e11d48; --shadow:0 10px 30px rgba(0,0,0,.1); }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Kufi Arabic",Arial,sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden}
    a{text-decoration:none;color:inherit} .container{width:min(1150px,92%);margin-inline:auto}
    .btn{display:inline-flex;align-items:center;gap:.6rem;padding:.9rem 1.2rem;border-radius:14px;border:1px solid transparent;cursor:pointer;font-weight:600;transition:.25s}
    .btn-primary{background:var(--primary);color:#fff;box-shadow:var(--shadow)} .btn-outline{background:transparent;color:var(--text);border-color:#666}
    .btn:hover{transform:translateY(-2px) scale(1.01)}
    .hero{position:relative;min-height:72vh;display:grid;place-items:center;text-align:center;background:radial-gradient(1200px 500px at 50% 0%, rgba(230,57,70,.15), transparent)}
    .hero .content{position:relative;z-index:2;padding:0 1rem}
    .hero h1{font-size:clamp(32px,5vw,64px);line-height:1.1;margin:0 0 1rem} .hero p{color:var(--muted);max-width:55ch;margin:0 auto 1.2rem}
    .cta{display:flex;gap:.8rem;justify-content:center;flex-wrap:wrap}
    section{padding:70px 0} .section-title{text-align:center;font-size:clamp(24px,3vw,36px);margin:0 0 18px}
    .section-sub{text-align:center;color:var(--muted);margin-bottom:34px}
    .grid{display:grid;gap:18px} .grid.portfolio{grid-template-columns:repeat(12,1fr)}
    .tile{position:relative;border-radius:18px;overflow:hidden;background:#000;min-height:220px;box-shadow:var(--shadow);cursor:pointer}
    .tile img{width:100%;height:100%;object-fit:cover;display:block;background:#000}
    .tile .overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.55),rgba(0,0,0,.15));opacity:0;transition:.35s}
    .tile:hover .overlay{opacity:1}
    .tile .meta{position:absolute;inset-inline:14px;bottom:12px;color:#fff;display:flex;justify-content:space-between;align-items:center;gap:10px}
    .badge{font-size:12px;padding:.38rem .6rem;border-radius:999px;background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.25)}
    .col-6{grid-column:span 6} .col-8{grid-column:span 8} .col-4{grid-column:span 4} .col-12{grid-column:span 12}
    .services,.offers{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:22px;box-shadow:var(--shadow);transition:.25s}
    .card:hover{transform:translateY(-4px)} .card p{margin:0;color:var(--muted)}
    .offer{background:linear-gradient(135deg,rgba(230,57,70,.1),rgba(34,211,238,.12));border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:22px;backdrop-filter:blur(6px)}
    .offer .price{font-size:28px;font-weight:800;margin:6px 0 12px}
    .contact{display:grid;grid-template-columns:1.2fr .8fr;gap:22px}
    form{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:22px;box-shadow:var(--shadow)}
    .field{display:grid;gap:6px;margin-bottom:12px}
    .field input,.field textarea,.field select{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #333;background:#0f0f0f;color:var(--text)}
    [data-theme="light"] .field input,[data-theme="light"] .field textarea,[data-theme="light"] .field select{background:#fff;border-color:#ddd;color:#111}
    footer{padding:28px 0;color:var(--muted);text-align:center;border-top:1px solid rgba(255,255,255,.08)}
    .filters{display:flex;gap:.6rem;justify-content:center;flex-wrap:wrap;margin-bottom:18px}
    .chip{padding:.5rem .9rem;border-radius:999px;border:1px solid #555;cursor:pointer;font-size:.9rem;transition:.2s}
    .chip.active,.chip:hover{background:var(--primary);color:#fff;border-color:transparent}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;padding:20px;z-index:50}
    .modal.open{display:flex} .modal .box{width:min(1000px,95%);background:var(--card);border-radius:18px;overflow:hidden;box-shadow:var(--shadow)}
    .modal header{display:flex;gap:10px;align-items:center;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
    .modal header h4{margin:0;font-size:18px;flex:1} .modal .content{padding:0;display:grid}
    /* فيديو مستجيب داخل المودال */
    .responsive-video{position:relative;width:100%;padding-top:56.25%;background:#000}
    .responsive-video iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    .reveal{transform:translateY(14px);opacity:0;transition:.6s ease} .reveal.visible{transform:none;opacity:1}
    @media (max-width:900px){.services,.offers{grid-template-columns:1fr 1fr}.contact{grid-template-columns:1fr}.col-8,.col-6,.col-4{grid-column:span 12}}
    @media (max-width:600px){.services,.offers{grid-template-columns:1fr}.hero p{font-size:.98rem}}
  </style>
</head>
<body>
  <!-- Theme Toggle -->
  <div class="container" style="position:fixed; left:16px; top:16px; z-index:60">
    <button id="themeToggle" class="btn btn-outline" aria-label="تبديل المظهر">🌙 / ☀️</button>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="content">
      <h1 class="reveal">نحوّل لحظاتك إلى فيلم لا يُنسى</h1>
      <p class="reveal" style="transition-delay:.08s">بورتفوليو مصور فيديوغرافي — مودرن، ديناميكي، ومليان أنيميشن.</p>
      <div class="cta reveal" style="transition-delay:.12s">
        <a href="#portfolio" class="btn btn-primary">شاهد الأعمال</a>
        <a href="#contact" class="btn btn-outline">اطلب عرض سعر</a>
      </div>
    </div>
  </header>

  <!-- PORTFOLIO -->
  <section id="portfolio" class="container">
    <h2 class="section-title reveal">أعمال مختارة</h2>
    <p class="section-sub reveal">فلتر حسب نوع المشروع</p>
    <div class="filters reveal" id="filters">
      <button class="chip active" data-filter="all">الكل</button>
      <button class="chip" data-filter="wedding">أفراح</button>
      <button class="chip" data-filter="commercial">إعلانات</button>
      <button class="chip" data-filter="event">فعاليات</button>
      <button class="chip" data-filter="social">سوشيال</button>
    </div>

    <div class="grid portfolio">
      <!-- 1) YouTube -->
      <article class="tile col-8 reveal" data-cat="commercial" data-title="إعلان عطور — Noir"
               data-link="https://youtu.be/LeFb5SOypzo?si=RVkGNmEMpJUn4rMZ">
        <img alt="Commercial Ad" />
        <div class="overlay"></div>
        <div class="meta"><span>إعلان براند</span><span class="badge">60 ثانية</span></div>
      </article>

      <!-- باقي العناصر = Facebook link -->
      <article class="tile col-4 reveal" data-cat="wedding" data-title="Wedding — Sara & Ali"
               data-link="https://www.facebook.com/share/v/1713j7bzhb/">
        <img alt="Wedding Film" />
        <div class="overlay"></div>
        <div class="meta"><span>فيلم زفاف</span><span class="badge">3 دقائق</span></div>
      </article>

      <article class="tile col-6 reveal" data-cat="event" data-title="Tech Summit 2025"
               data-link="https://www.facebook.com/share/v/1713j7bzhb/">
        <img alt="Event Coverage" />
        <div class="overlay"></div>
        <div class="meta"><span>تغطية حدث</span><span class="badge">هايلايت</span></div>
      </article>

      <article class="tile col-6 reveal" data-cat="social" data-title="Reels Pack for Brand X"
               data-link="https://www.facebook.com/share/v/1713j7bzhb/">
        <img alt="Social Media Reels" />
        <div class="overlay"></div>
        <div class="meta"><span>ريلز سوشيال</span><span class="badge">9×16</span></div>
      </article>

      <article class="tile col-12 reveal" data-cat="commercial" data-title="Restaurant Promo"
               data-link="https://www.facebook.com/share/v/1713j7bzhb/">
        <img alt="Restaurant Promo" />
        <div class="overlay"></div>
        <div class="meta"><span>برومو مطعم</span><span class="badge">45 ثانية</span></div>
      </article>
    </div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="container">
    <h2 class="section-title reveal">الخدمات</h2>
    <p class="section-sub reveal">حلول كاملة من التخطيط للتسليم</p>
    <div class="services">
      <div class="card reveal"><h3>Wedding Films</h3><p>تغطية سينمائية مع مونتاج عاطفي.</p></div>
      <div class="card reveal" style="transition-delay:.06s"><h3>Commercial Ads</h3><p>إعلانات سريعة التأثير للسوشيال.</p></div>
      <div class="card reveal" style="transition-delay:.12s"><h3>Event Coverage</h3><p>توثيق احترافي للفعاليات.</p></div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="container">
    <h2 class="section-title reveal">تواصل</h2>
    <p class="section-sub reveal">هنرجع لك في أقل من 24 ساعة</p>
    <div class="contact">
      <form id="contactForm" class="reveal">
        <div class="field"><label>الاسم</label><input type="text" name="name" required placeholder="اكتب اسمك هنا" /></div>
        <div class="field"><label>البريد الإلكتروني</label><input type="email" name="email" required placeholder="you@example.com" /></div>
        <div class="field"><label>نوع الخدمة</label>
          <select name="service"><option value="wedding">Wedding</option><option value="commercial">Commercial</option><option value="event">Event</option><option value="social">Social</option></select>
        </div>
        <div class="field"><label>الرسالة</label><textarea name="message" rows="4" placeholder="احكي لنا عن مشروعك"></textarea></div>
        <button class="btn btn-primary" type="submit">إرسال</button>
      </form>
      <div class="card reveal" style="height:max-content">
        <h3>طرق التواصل السريع</h3>
        <p style="margin-top:6px">واتساب: <a href="#">+2012 345 6789</a></p>
        <p>إنستجرام: <a href="#">@yourbrand.films</a></p>
        <p>إيميل: <a href="mailto:hello@yourbrand.com">hello@yourbrand.com</a></p>
        <p style="color:var(--muted); margin-top:12px">العنوان: القاهرة، مصر</p>
      </div>
    </div>
  </section>

  <footer>© 2025 جميع الحقوق محفوظة — YourBrand Films</footer>

  <!-- MODAL -->
  <div class="modal" id="modal">
    <div class="box">
      <header>
        <h4 id="modalTitle">عنوان العمل</h4>
        <a id="modalOpenLink" class="btn btn-primary" href="#" target="_blank" rel="noopener">فتح الفيديو</a>
        <button id="modalClose" class="btn btn-outline">إغلاق</button>
      </header>
      <div class="content" id="modalContent"></div>
    </div>
  </div>

  <script>
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    const storedTheme = localStorage.getItem('theme');
    if (storedTheme) document.documentElement.setAttribute('data-theme', storedTheme);
    themeToggle.addEventListener('click', () => {
      const next = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', next); localStorage.setItem('theme', next);
    });

    // Reveal
    const io = new IntersectionObserver((ents)=>ents.forEach(e=>{if(e.isIntersecting)e.target.classList.add('visible')}),{threshold:.15});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // Helpers: استخراج IDs الروابط
    const getYouTubeId = (url) => (url.match(/(?:youtu\.be\/|v=|\/embed\/|\/shorts\/)([\w-]{6,})/i) || [])[1] || null;
    const getVimeoId  = (url) => (url.match(/vimeo\.com\/(?:video\/)?(\d+)/i) || [])[1] || null;

    // 🧩 توليد ثَمنيل SVG (لفيسبوك كبديل)
    const svgThumb = (label = 'Facebook Video') => {
      const svg = `
        <svg xmlns='http://www.w3.org/2000/svg' width='1280' height='720'>
          <defs>
            <linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
              <stop offset='0%' stop-color='#0b0b0b'/>
              <stop offset='100%' stop-color='#1a1a1a'/>
            </linearGradient>
          </defs>
          <rect width='100%' height='100%' fill='url(#g)'/>
          <circle cx='640' cy='360' r='70' fill='rgba(255,255,255,0.12)'/>
          <polygon points='620,320 720,360 620,400' fill='#fff'/>
          <text x='50%' y='92%' font-size='48' fill='#ffffff' font-family='sans-serif' text-anchor='middle' opacity='0.85'>${label}</text>
        </svg>`;
      return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
    };

    // 🧩 تعيين الثمنيل تلقائيًا لكل بلاطة
    async function applyAutoThumbnails() {
      const tiles = [...document.querySelectorAll('.tile')];
      await Promise.all(tiles.map(async (t) => {
        const img = t.querySelector('img');
        const link = t.dataset.link || '';
        if (!img) return;

        // YouTube
        if (/youtu\.be|youtube\.com/i.test(link)) {
          const id = getYouTubeId(link);
          if (id) { img.src = `https://i.ytimg.com/vi/${id}/hqdefault.jpg`; return; }
        }

        // Vimeo (oEmbed)
        if (/vimeo\.com/i.test(link)) {
          try {
            const res = await fetch(`https://vimeo.com/api/oembed.json?url=${encodeURIComponent(link)}`);
            if (res.ok) {
              const data = await res.json();
              if (data.thumbnail_url) { img.src = data.thumbnail_url.replace(/_\\d+x\\d+/, '_1280x720'); return; }
            }
          } catch(e) { /* ignore */ }
        }

        // Facebook → نستخدم SVG Placeholder
        if (/facebook\.com/i.test(link)) {
          img.src = svgThumb('Facebook Video');
          return;
        }

        // لو مفيش حاجة من دول: سيب الصورة فاضية أو حط Placeholder عام
        if (!img.getAttribute('src')) img.src = svgThumb('Video');
      }));
    }

    // فلترة البورتفوليو
    const tiles = [...document.querySelectorAll('.tile')];
    const filterBtns = document.querySelectorAll('#filters .chip');
    filterBtns.forEach(btn => btn.addEventListener('click', () => {
      filterBtns.forEach(b => b.classList.remove('active')); btn.classList.add('active');
      const f = btn.dataset.filter; tiles.forEach(t => t.style.display = (f==='all'||t.dataset.cat===f)?'':'none');
    }));

    // MODAL
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const modalOpenLink = document.getElementById('modalOpenLink');
    const close = () => modal.classList.remove('open');
    document.getElementById('modalClose').addEventListener('click', close);
    modal.addEventListener('click', (e) => { if (e.target === modal) close(); });

    // بناء رابط التضمين والتشغيل التلقائي
    const buildEmbed = (link) => {
      if (!link) return null;
      if (/facebook\.com/i.test(link)) {
        return { kind: 'iframe', src: `https://www.facebook.com/plugins/video.php?href=${encodeURIComponent(link)}&show_text=false&autoplay=1&mute=1&allowfullscreen=true` };
      }
      if (/youtu\.be|youtube\.com/i.test(link)) {
        const id = getYouTubeId(link);
        if (id) return { kind: 'iframe', src: `https://www.youtube.com/embed/${id}?autoplay=1&mute=1&playsinline=1&rel=0` };
      }
      if (/vimeo\.com/i.test(link)) {
        const id = getVimeoId(link);
        if (id) return { kind: 'iframe', src: `https://player.vimeo.com/video/${id}?autoplay=1&muted=1` };
      }
      if (/\.(mp4|webm|ogg)(\?.*)?$/i.test(link)) return { kind:'video', src: link };
      return null;
    };

    // فتح المودال وتشغيل الفيديو
    tiles.forEach(t => t.addEventListener('click', () => {
      modalTitle.textContent = t.dataset.title || 'Project';
      modalContent.innerHTML = '';
      const link = t.dataset.link;
      const emb = buildEmbed(link);

      if (emb && emb.kind === 'iframe') {
        const wrap = document.createElement('div'); wrap.className = 'responsive-video';
        const iframe = document.createElement('iframe');
        iframe.src = emb.src;
        iframe.allow = 'autoplay; encrypted-media; fullscreen; picture-in-picture';
        iframe.setAttribute('allowfullscreen','true');
        modalContent.appendChild(wrap); wrap.appendChild(iframe);
        modalOpenLink.style.display = ''; modalOpenLink.href = link || '#';
      } else if (emb && emb.kind === 'video') {
        const v = document.createElement('video'); v.src = emb.src; v.controls = true; v.autoplay = true; v.muted = true; v.playsInline = true; v.style.width='100%';
        modalContent.appendChild(v);
        modalOpenLink.style.display = link ? '' : 'none'; modalOpenLink.href = link || '#';
      } else {
        const media = t.querySelector('img')?.cloneNode(true); if (media) modalContent.appendChild(media);
        modalOpenLink.style.display = link ? '' : 'none'; modalOpenLink.href = link || '#';
      }
      modal.classList.add('open');
    }));

    // Contact form demo
    document.getElementById('contactForm').addEventListener('submit',(e)=>{
      e.preventDefault(); const data = Object.fromEntries(new FormData(e.target).entries());
      alert('تم استلام رسالتك!\n\n' + JSON.stringify(data, null, 2)); e.target.reset();
    });

    // شغّل توليد الثمنيل
    applyAutoThumbnails();
  </script>
</body>
</html>
